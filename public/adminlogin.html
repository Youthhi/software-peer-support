<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<div class="bg-white p-8 rounded-lg shadow-md w-full max-w-sm">

    <h2 class="text-2xl font-bold text-center mb-6">Admin Login</h2>

    <input id="adminId" type="text" placeholder="Admin ID"
        class="w-full mb-4 px-4 py-2 border rounded-lg">

    <input id="password" type="password" placeholder="Password"
        class="w-full mb-4 px-4 py-2 border rounded-lg">

    <button onclick="adminLogin()"
        class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700">
        Login
    </button>

    <p id="message" class="text-center text-sm mt-3"></p>

</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAlpEfar5odDfV9c2bbmaIpAt5fJJfbez4",
        authDomain: "software-peer-support.firebaseapp.com",
        projectId: "software-peer-support",
        storageBucket: "software-peer-support.firebasestorage.app",
        messagingSenderId: "43088815786",
        appId: "1:43088815786:web:4332760b0fef1b7ae152d3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.adminLogin = async function () {
        const adminId = document.getElementById("adminId").value;
        const password = document.getElementById("password").value;
        const message = document.getElementById("message");

        try {
            const adminRef = doc(db, "admins", adminId);
            const adminSnap = await getDoc(adminRef);

            if (!adminSnap.exists()) {
                message.textContent = "Invalid admin ID";
                message.className = "text-red-500";
                return;
            }

            if (adminSnap.data().password !== password) {
                message.textContent = "Invalid password";
                message.className = "text-red-500";
                return;
            }

            // âœ… SUCCESS
            message.textContent = "Admin login successful";
            message.className = "text-green-600";

            setTimeout(() => {
                window.location.href =
                    "/software-peer-support/public/admindashboard.html";
            }, 1000);

        } catch (error) {
            message.textContent = error.message;
            message.className = "text-red-500";
        }
    };
</script>

</body>
</html>
